!function(a){function b(b){function c(b){return a.mobile?[b.pageX,b.pageY]:[b.originalEvent.touches[0].pageX,b.originalEvent.touches[0].pageY]}var d=["touchstart","touchmove","touchend"];a.mobile&&(d=["vmousedown","vmousemove","vmouseup"]),b.toucharea={},b.$el.unbind(d[0]).bind(d[0],function(a){a.preventDefault(),a.stopPropagation(),b.toucharea.prevTime=(new Date).getTime(),b.toucharea.mouseDown=!0,b.toucharea.touchMoved=!1,b.toucharea.diffTime=0,b.toucharea.diffX=0,b.toucharea.diffY=0;var d=c(a);b.toucharea.prevX=d[0],b.toucharea.prevY=d[1];var a=jQuery.Event("touchdragstart");b.$el.trigger(a,{x:b.toucharea.prevX,y:b.toucharea.prevY})}),b.$el.unbind(d[1]).bind(d[1],function(a){if(a.preventDefault(),a.stopPropagation(),b.toucharea.mouseDown){b.toucharea.touchMoved=!0;var d=(new Date).getTime();b.toucharea.diffTime=d-b.toucharea.prevTime,b.toucharea.prevTime=d;var e=c(a);b.toucharea.diffX=e[0]-b.toucharea.prevX,b.toucharea.diffY=e[1]-b.toucharea.prevY,b.toucharea.prevX=e[0],b.toucharea.prevY=e[1];var a=jQuery.Event("touchdragmove");b.$el.trigger(a,{x:b.toucharea.prevX,y:b.toucharea.prevY,diffX:b.toucharea.diffX,diffY:b.toucharea.diffY,durationMS:b.toucharea.diffTime})}}),b.$el.unbind(d[2]).bind(d[2],function(a){a.preventDefault(),a.stopPropagation(),b.toucharea.mouseDown=!1;var a=jQuery.Event("touchdragend");b.$el.trigger(a,{x:b.toucharea.prevX,y:b.toucharea.prevY,diffX:b.toucharea.diffX,diffY:b.toucharea.diffY,durationMS:b.toucharea.diffTime,didDrag:b.toucharea.touchMoved})})}a.TouchArea=function(c,d){var e=this;e.$el=a(c),e.el=c,e.$el.data("TouchArea",e),e.init=function(){e.options=a.extend({},a.TouchArea.defaultOptions,d),b(e)},e.init()},a.TouchArea.defaultOptions={},a.fn.touchArea=function(b){return this.each(function(){new a.TouchArea(this,b)})},a.fn.getTouchArea=function(){this.data("TouchArea")}}(jQuery),$('[data-role="page"]').live("pagebeforecreate",function(){for(var a=$(this).find('[data-toucharea="true"]'),b=0;b<a.length;b++)$(a[b]).touchArea()});