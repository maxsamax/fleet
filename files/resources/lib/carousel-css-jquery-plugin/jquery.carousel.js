!function(a){function b(b){b.$el.touchArea(),a(b.$el).parent().css("position","absolute").css("width","100%"),a(b.$el).css("overflow","visible").css("padding",0).css("position","relative").css("left","0%");for(var c=a(b.$el).find(".carouselitem:visible"),d=0;d<c.length;d++)a(c[d]).css("width","100%").css("display","inline-block").css("position","absolute").css("left",100*d+"%");b.carouselId=Math.floor(1e3*Math.random()),b.idPrefix=b.carouselId+"-carousel-circle-",b.clientWidth=document.body.clientWidth;for(var d=0,e=c.length;e>d;d++){var f=a("<div>").css("position","absolute").css("bottom","0%").css("left",b.clientWidth/2+20*(e/2-e)+15*d+"px").css("width","10px").css("height","10px").css("background-color","#000").css("border-radius","5px").css("opacity",.3).addClass("carouselCircle");f.attr("id",b.idPrefix+d),a(b.$el).parent().append(f)}a("#"+b.idPrefix+"0").css("opacity",1),b.isAnimating=!1,b.disposition=0,b.maxDisposition=c.length,b.totalDispositionX=0,b.el.style.webkitTransition="-webkit-transform 300ms ease-in-out",b.pageTransThreshold=b.clientWidth/8,a(b.$el).unbind("touchdragstart").bind("touchdragstart",function(a,c){1!=b.isAnimating&&(b.startX=c.x,b.currentDispositionX=0)}),a(b.$el).unbind("touchdragmove").bind("touchdragmove",function(a,c){1!=b.isAnimating&&0!=c.diffX&&(b.isAnimating=!0,b.totalDispositionX+=c.diffX,b.currentDispositionX+=c.diffX,setTimeout(function(){b.isAnimating=!1},c.durationMS+1),b.el.style.webkitTransition="-webkit-transform "+c.durationMS+"ms linear",b.el.style.webkitTransform="translateX("+b.totalDispositionX+"px)")}),a(b.$el).unbind("touchdragend").bind("touchdragend",function(c,d){if(b.isAnimating=!0,b.currentDispositionX>0&&0==b.disposition||b.currentDispositionX<0&&b.disposition==b.maxDisposition-1||Math.abs(b.currentDispositionX)<b.pageTransThreshold)b.totalDispositionX+=-1*b.currentDispositionX;else if(Math.abs(b.currentDispositionX)>=b.pageTransThreshold){var e=b.currentDispositionX/Math.abs(b.currentDispositionX);b.totalDispositionX+=(b.clientWidth-Math.abs(b.currentDispositionX))*e,a("#"+b.idPrefix+b.disposition).css("opacity",.3),b.disposition+=-1*e,a("#"+b.idPrefix+b.disposition).css("opacity",1)}setTimeout(function(){b.isAnimating=!1},301),b.el.style.webkitTransition="-webkit-transform 300ms ease-in-out",b.el.style.webkitTransform="translateX("+b.totalDispositionX+"px)"})}a.Carousel=function(c){var d=this;d.$el=a(c),d.el=c,d.$el.data("Carousel",d),d.init=function(){b(d)},d.init()},a.fn.carousel=function(b){return void 0!=b&&"refresh"==b&&a(this).parent().find(".carouselCircle").remove(),this.each(function(){new a.Carousel(this)})}}(jQuery);