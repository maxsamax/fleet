var VimeoPlayer=function(){function a(b){return new a.fn.init(b)}function b(a){var b;for(b=0;b<d.length;b++)if(d[b].contentWindow==a)return d[b];return null}function c(a){var c=JSON.parse(a.data),d=b(a.source);(void 0===d||null===d)&&"ready"==c.event&&$(d).data("vimeo-player-api-ready",!0);var e=$(d).data("vimeo-player-object");e&&e.handleMessage(c.event,c.data)}var d=[];return a.fn=a.prototype={element:null,init:function(a){this.$element=a,this.element=a[0],this.$element.data("vimeo-player-object",this);var b=a.attr("src").split("?")[0];return"//"===b.substr(0,2)&&(b=window.location.protocol+b),this.url=b,d.push(this.element),a.data("vimeo-player-api-ready")&&this.onReady(),this},handleMessage:function(a,b){switch(a){case"ready":this.onReady();break;case"loadProgress":this.onLoadProgress(b);break;case"playProgress":this.onPlayProgress(b);break;case"play":this.onPlay();break;case"pause":this.onPause();break;case"finish":this.onFinish();break;case"seek":this.onSeek(b)}},post:function(a,b){var c={method:a};b&&(c.value=b),this.element.contentWindow.postMessage(JSON.stringify(c),this.url)},onReady:function(){this.$element.trigger("vimeoready"),this.post("addEventListener","loadProgress"),this.post("addEventListener","playProgress"),this.post("addEventListener","play"),this.post("addEventListener","pause"),this.post("addEventListener","finish"),this.post("addEventListener","seek")},onLoadProgress:function(a){this.$element.trigger("vimeoloadProgress",[a])},onPlayProgress:function(a){this.$element.trigger("vimeoplayProgress",[a])},onPlay:function(){this.$element.trigger("vimeoplay")},onPause:function(){this.$element.trigger("vimeopause")},onFinish:function(){this.$element.trigger("vimeofinish")},onSeek:function(a){this.$element.trigger("vimeoseek",[a])}},window.addEventListener?window.addEventListener("message",c,!1):window.attachEvent("onmessage",c),a.fn.init.prototype=a.fn,window.VimeoPlayer=a}();